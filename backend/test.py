# import torch
# import numpy as np

# a = torch.tensor([[6.6491e-02, 1.1383e-01, 7.0157e-02, 6.3390e-02, 8.3665e-02, 3.9635e-02,
#          6.1927e-02, 8.5731e-02, 9.4436e-02, 1.2101e-01, 7.0269e-03, 4.2939e-10,
#          6.0825e-02, 2.6854e-02, 4.1571e-02, 4.6364e-02, 3.9292e-02, 4.6860e-02,
#          1.0692e-01, 5.1467e-02, 3.6712e-02, 3.0804e-02, 3.3247e-02, 7.1576e-02,
#          5.3140e-02, 8.5562e-02, 2.2195e-03, 1.4285e-01, 3.4374e-02, 2.7822e-02,
#          5.6329e-02, 3.3350e-02, 7.6714e-02, 3.9785e-02, 5.5377e-02, 2.8199e-02,
#          5.7068e-02, 4.3670e-02, 1.0563e-01, 6.3588e-02, 1.3758e-02, 3.6554e-02,
#          6.0585e-02, 6.1783e-02, 1.1294e-01, 6.9210e-02, 9.0255e-02, 5.3155e-02,
#          5.6631e-02, 5.8732e-02, 3.2212e-02, 8.2513e-02, 4.8458e-02, 2.2964e-02,
#          5.1433e-02],
#          [6.6491e-02, 1.1383e-01, 7.0157e-02, 6.3390e-02, 8.3665e-02, 3.9635e-02,
#          6.1927e-02, 8.5731e-02, 9.4436e-02, 1.2101e-01, 7.0269e-03, 4.2939e-10,
#          6.0825e-02, 2.6854e-02, 4.1571e-02, 4.6364e-02, 3.9292e-02, 4.6860e-02,
#          1.0692e-01, 5.1467e-02, 3.6712e-02, 3.0804e-02, 3.3247e-02, 7.1576e-02,
#          5.3140e-02, 8.5562e-02, 2.2195e-03, 1.4285e-01, 3.4374e-02, 2.7822e-02,
#          5.6329e-02, 3.3350e-02, 7.6714e-02, 3.9785e-02, 5.5377e-02, 2.8199e-02,
#          5.7068e-02, 4.3670e-02, 1.0563e-01, 6.3588e-02, 1.3758e-02, 3.6554e-02,
#          6.0585e-02, 6.1783e-02, 1.1294e-01, 6.9210e-02, 9.0255e-02, 5.3155e-02,
#          5.6631e-02, 5.8732e-02, 3.2212e-02, 8.2513e-02, 4.8458e-02, 2.2964e-02,
#          5.1433e-02],
#          [6.6491e-02, 1.1383e-01, 7.0157e-02, 6.3390e-02, 8.3665e-02, 3.9635e-02,
#          6.1927e-02, 8.5731e-02, 9.4436e-02, 1.2101e-01, 7.0269e-03, 4.2939e-10,
#          6.0825e-02, 2.6854e-02, 4.1571e-02, 4.6364e-02, 3.9292e-02, 4.6860e-02,
#          1.0692e-01, 5.1467e-02, 3.6712e-02, 3.0804e-02, 3.3247e-02, 7.1576e-02,
#          5.3140e-02, 8.5562e-02, 2.2195e-03, 1.4285e-01, 3.4374e-02, 2.7822e-02,
#          5.6329e-02, 3.3350e-02, 7.6714e-02, 3.9785e-02, 5.5377e-02, 2.8199e-02,
#          5.7068e-02, 4.3670e-02, 1.0563e-01, 6.3588e-02, 1.3758e-02, 3.6554e-02,
#          6.0585e-02, 6.1783e-02, 1.1294e-01, 6.9210e-02, 9.0255e-02, 5.3155e-02,
#          5.6631e-02, 5.8732e-02, 3.2212e-02, 8.2513e-02, 4.8458e-02, 2.2964e-02,
#          5.1433e-02]])

# # torch.save(a, 'features.pt')

# # b = torch.load('features.pt', map_location=torch.device('cpu'))[0]

# b = torch.tensor([[6.6491e-02, 1.1383e-01, 7.0157e-02, 6.3390e-02, 8.3665e-02, 3.9635e-02,
#          6.1927e-02, 8.5731e-02, 9.4436e-02, 1.2101e-01, 7.0269e-03, 4.2939e-10,
#          6.0825e-02, 2.6854e-02, 4.1571e-02, 4.6364e-02, 3.9292e-02, 4.6860e-02,
#          1.0692e-01, 5.1467e-02, 3.6712e-02, 3.0804e-02, 3.3247e-02, 7.1576e-02,
#          5.3140e-02, 8.5562e-02, 2.2195e-03, 1.4285e-01, 3.4374e-02, 2.7822e-02,
#          5.6329e-02, 3.3350e-02, 7.6714e-02, 3.9785e-02, 5.5377e-02, 2.8199e-02,
#          5.7068e-02, 4.3670e-02, 1.0563e-01, 6.3588e-02, 1.3758e-02, 3.6554e-02,
#          6.0585e-02, 6.1783e-02, 1.1294e-01, 6.9210e-02, 9.0255e-02, 5.3155e-02,
#          5.6631e-02, 5.8732e-02, 3.2212e-02, 8.2513e-02, 4.8458e-02, 2.2964e-02,
#          5.1433e-02]])
# a = a.numpy()
# b = b.numpy()

# # print(b)
# scores = np.dot(a, b.T)
# print(scores)
# ranks = np.argsort(-scores, axis=0)
# print(ranks)

import base64

im = '../data/test/query_image.jpg'
with open(im, "rb") as f:
    encoded_string= 'data:image/png;base64,' + str(base64.b64encode(f.read())).replace("b'",'')[:-1]
    print(encoded_string)